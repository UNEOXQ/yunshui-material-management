#!/usr/bin/env node\n\nconst fs = require('fs');\nconst path = require('path');\nconst { execSync } = require('child_process');\n\n/**\n * ç³»çµ±ç‹€æ…‹æª¢æŸ¥è…³æœ¬\n */\n\nconst REQUIRED_FILES = {\n  // å¾Œç«¯æª”æ¡ˆ\n  'backend/src/server.ts': 'å¾Œç«¯ä¼ºæœå™¨å…¥å£',\n  'backend/package.json': 'å¾Œç«¯ä¾è³´é…ç½®',\n  'backend/src/config/database.ts': 'è³‡æ–™åº«é…ç½®',\n  'backend/src/config/environment.ts': 'ç’°å¢ƒé…ç½®',\n  'backend/Dockerfile': 'å¾Œç«¯ Docker é…ç½®',\n  \n  // å‰ç«¯æª”æ¡ˆ\n  'frontend/src/App.tsx': 'å‰ç«¯æ‡‰ç”¨ç¨‹å¼å…¥å£',\n  'frontend/src/main.tsx': 'å‰ç«¯ä¸»æª”æ¡ˆ',\n  'frontend/package.json': 'å‰ç«¯ä¾è³´é…ç½®',\n  'frontend/vite.config.ts': 'Vite é…ç½®',\n  'frontend/Dockerfile': 'å‰ç«¯ Docker é…ç½®',\n  \n  // Docker é…ç½®\n  'docker-compose.yml': 'ç”Ÿç”¢ç’°å¢ƒ Docker Compose',\n  'docker-compose.dev.yml': 'é–‹ç™¼ç’°å¢ƒ Docker Compose',\n  'Makefile': 'Make å‘½ä»¤é…ç½®',\n  \n  // ç’°å¢ƒé…ç½®\n  '.env.example': 'ç’°å¢ƒè®Šæ•¸ç¯„ä¾‹',\n  'backend/.env.development': 'å¾Œç«¯é–‹ç™¼ç’°å¢ƒé…ç½®',\n  'backend/.env.test': 'å¾Œç«¯æ¸¬è©¦ç’°å¢ƒé…ç½®',\n  'backend/.env.production': 'å¾Œç«¯ç”Ÿç”¢ç’°å¢ƒé…ç½®',\n  'frontend/.env.development': 'å‰ç«¯é–‹ç™¼ç’°å¢ƒé…ç½®',\n  'frontend/.env.test': 'å‰ç«¯æ¸¬è©¦ç’°å¢ƒé…ç½®',\n  'frontend/.env.production': 'å‰ç«¯ç”Ÿç”¢ç’°å¢ƒé…ç½®',\n  \n  // æ–‡ä»¶\n  'README.md': 'å°ˆæ¡ˆèªªæ˜æ–‡ä»¶',\n  'DOCKER.md': 'Docker éƒ¨ç½²æŒ‡å—',\n  'ENVIRONMENT.md': 'ç’°å¢ƒé…ç½®æŒ‡å—',\n  'TESTING.md': 'æ¸¬è©¦æŒ‡å—'\n};\n\nconst REQUIRED_DIRECTORIES = {\n  'backend/src': 'å¾Œç«¯åŸå§‹ç¢¼',\n  'frontend/src': 'å‰ç«¯åŸå§‹ç¢¼',\n  'database/init': 'è³‡æ–™åº«åˆå§‹åŒ–è…³æœ¬',\n  'scripts': 'å·¥å…·è…³æœ¬',\n  '.github/workflows': 'CI/CD å·¥ä½œæµç¨‹'\n};\n\nfunction checkSystemStatus() {\n  console.log('ğŸ” æª¢æŸ¥é›²æ°´åŸºæç®¡ç†ç³»çµ±ç‹€æ…‹...');\n  console.log('=' .repeat(50));\n  \n  let allGood = true;\n  \n  // æª¢æŸ¥å¿…è¦æª”æ¡ˆ\n  console.log('\\nğŸ“ æª¢æŸ¥å¿…è¦æª”æ¡ˆ:');\n  for (const [filePath, description] of Object.entries(REQUIRED_FILES)) {\n    if (fs.existsSync(filePath)) {\n      console.log(`âœ… ${description}: ${filePath}`);\n    } else {\n      console.log(`âŒ ${description}: ${filePath} (ç¼ºå¤±)`);\n      allGood = false;\n    }\n  }\n  \n  // æª¢æŸ¥å¿…è¦ç›®éŒ„\n  console.log('\\nğŸ“‚ æª¢æŸ¥å¿…è¦ç›®éŒ„:');\n  for (const [dirPath, description] of Object.entries(REQUIRED_DIRECTORIES)) {\n    if (fs.existsSync(dirPath) && fs.statSync(dirPath).isDirectory()) {\n      console.log(`âœ… ${description}: ${dirPath}`);\n    } else {\n      console.log(`âŒ ${description}: ${dirPath} (ç¼ºå¤±)`);\n      allGood = false;\n    }\n  }\n  \n  // æª¢æŸ¥ä¾è³´å®‰è£ç‹€æ…‹\n  console.log('\\nğŸ“¦ æª¢æŸ¥ä¾è³´å®‰è£ç‹€æ…‹:');\n  \n  // æª¢æŸ¥å¾Œç«¯ä¾è³´\n  if (fs.existsSync('backend/node_modules')) {\n    console.log('âœ… å¾Œç«¯ä¾è³´å·²å®‰è£');\n  } else {\n    console.log('âš ï¸  å¾Œç«¯ä¾è³´æœªå®‰è£ (åŸ·è¡Œ: cd backend && npm install)');\n  }\n  \n  // æª¢æŸ¥å‰ç«¯ä¾è³´\n  if (fs.existsSync('frontend/node_modules')) {\n    console.log('âœ… å‰ç«¯ä¾è³´å·²å®‰è£');\n  } else {\n    console.log('âš ï¸  å‰ç«¯ä¾è³´æœªå®‰è£ (åŸ·è¡Œ: cd frontend && npm install)');\n  }\n  \n  // æª¢æŸ¥ Docker\n  console.log('\\nğŸ³ æª¢æŸ¥ Docker ç’°å¢ƒ:');\n  try {\n    execSync('docker --version', { stdio: 'pipe' });\n    console.log('âœ… Docker å·²å®‰è£');\n    \n    try {\n      execSync('docker-compose --version', { stdio: 'pipe' });\n      console.log('âœ… Docker Compose å·²å®‰è£');\n    } catch {\n      console.log('âš ï¸  Docker Compose æœªå®‰è£');\n    }\n  } catch {\n    console.log('âš ï¸  Docker æœªå®‰è£');\n  }\n  \n  // æª¢æŸ¥ç’°å¢ƒé…ç½®\n  console.log('\\nâš™ï¸  æª¢æŸ¥ç’°å¢ƒé…ç½®:');\n  if (fs.existsSync('.env')) {\n    console.log('âœ… ä¸»ç’°å¢ƒé…ç½®æª”æ¡ˆå­˜åœ¨');\n  } else {\n    console.log('âš ï¸  ä¸»ç’°å¢ƒé…ç½®æª”æ¡ˆä¸å­˜åœ¨ (è¤‡è£½ .env.example åˆ° .env)');\n  }\n  \n  // æª¢æŸ¥ä»»å‹™å®Œæˆç‹€æ…‹\n  console.log('\\nğŸ“‹ æª¢æŸ¥ä»»å‹™å®Œæˆç‹€æ…‹:');\n  if (fs.existsSync('.kiro/specs/yun-shui-material-management/tasks.md')) {\n    const tasksContent = fs.readFileSync('.kiro/specs/yun-shui-material-management/tasks.md', 'utf8');\n    const completedTasks = (tasksContent.match(/- \\[x\\]/g) || []).length;\n    const totalTasks = (tasksContent.match(/- \\[[ x]\\]/g) || []).length;\n    \n    console.log(`ğŸ“Š ä»»å‹™å®Œæˆé€²åº¦: ${completedTasks}/${totalTasks} (${Math.round(completedTasks/totalTasks*100)}%)`);\n    \n    if (completedTasks === totalTasks) {\n      console.log('ğŸ‰ æ‰€æœ‰ä»»å‹™å·²å®Œæˆï¼');\n    } else {\n      console.log(`â³ é‚„æœ‰ ${totalTasks - completedTasks} å€‹ä»»å‹™å¾…å®Œæˆ`);\n    }\n  }\n  \n  // ç¸½çµ\n  console.log('\\n' + '=' .repeat(50));\n  if (allGood) {\n    console.log('ğŸ‰ ç³»çµ±æª¢æŸ¥å®Œæˆï¼æ‰€æœ‰å¿…è¦æª”æ¡ˆéƒ½å­˜åœ¨ã€‚');\n    console.log('\\nğŸš€ ç³»çµ±å¯ä»¥é‹è¡Œï¼è«‹åƒè€ƒä»¥ä¸‹é‹è¡Œæ–¹å¼ï¼š');\n    printRunInstructions();\n  } else {\n    console.log('âš ï¸  ç³»çµ±æª¢æŸ¥ç™¼ç¾å•é¡Œï¼Œè«‹ä¿®å¾©ç¼ºå¤±çš„æª”æ¡ˆå¾Œå†é‹è¡Œã€‚');\n  }\n}\n\nfunction printRunInstructions() {\n  console.log('\\nğŸ“– é‹è¡Œæ–¹å¼:');\n  console.log('\\n1. ğŸ³ ä½¿ç”¨ Docker (æ¨è–¦):');\n  console.log('   make dev          # å•Ÿå‹•é–‹ç™¼ç’°å¢ƒ');\n  console.log('   make prod         # å•Ÿå‹•ç”Ÿç”¢ç’°å¢ƒ');\n  console.log('   make help         # æŸ¥çœ‹æ‰€æœ‰å¯ç”¨å‘½ä»¤');\n  \n  console.log('\\n2. ğŸ“¦ æ‰‹å‹•é‹è¡Œ:');\n  console.log('   # è¨­å®šç’°å¢ƒ');\n  console.log('   node scripts/setup-environment.js');\n  console.log('   ');\n  console.log('   # å®‰è£ä¾è³´');\n  console.log('   cd backend && npm install');\n  console.log('   cd frontend && npm install');\n  console.log('   ');\n  console.log('   # å•Ÿå‹•è³‡æ–™åº« (ä½¿ç”¨ Docker)');\n  console.log('   docker-compose -f docker-compose.dev.yml up -d database redis');\n  console.log('   ');\n  console.log('   # åŸ·è¡Œè³‡æ–™åº«é·ç§»');\n  console.log('   cd backend && npm run migrate:up');\n  console.log('   ');\n  console.log('   # å•Ÿå‹•å¾Œç«¯');\n  console.log('   cd backend && npm run dev');\n  console.log('   ');\n  console.log('   # å•Ÿå‹•å‰ç«¯ (æ–°çµ‚ç«¯)');\n  console.log('   cd frontend && npm run dev');\n  \n  console.log('\\n3. ğŸ§ª åŸ·è¡Œæ¸¬è©¦:');\n  console.log('   cd backend && npm test              # å–®å…ƒæ¸¬è©¦');\n  console.log('   cd backend && npm run test:integration  # æ•´åˆæ¸¬è©¦');\n  console.log('   node scripts/run-integration-tests.js  # å®Œæ•´æ¸¬è©¦å¥—ä»¶');\n  \n  console.log('\\n4. ğŸ”§ å…¶ä»–æœ‰ç”¨å‘½ä»¤:');\n  console.log('   cd backend && npm run env:validate     # é©—è­‰ç’°å¢ƒé…ç½®');\n  console.log('   curl http://localhost:3001/health      # æª¢æŸ¥å¾Œç«¯å¥åº·ç‹€æ…‹');\n  console.log('   make status                            # æŸ¥çœ‹æœå‹™ç‹€æ…‹');\n  \n  console.log('\\nğŸ“š æ›´å¤šè³‡è¨Š:');\n  console.log('   - README.md: å°ˆæ¡ˆæ¦‚è¦½å’Œå¿«é€Ÿé–‹å§‹');\n  console.log('   - DOCKER.md: Docker éƒ¨ç½²è©³ç´°æŒ‡å—');\n  console.log('   - ENVIRONMENT.md: ç’°å¢ƒé…ç½®è©³ç´°èªªæ˜');\n  console.log('   - TESTING.md: æ¸¬è©¦æŒ‡å—');\n  \n  console.log('\\nğŸŒ é è¨­å­˜å–ä½å€:');\n  console.log('   - å‰ç«¯: http://localhost:3000');\n  console.log('   - å¾Œç«¯ API: http://localhost:3001');\n  console.log('   - å¾Œç«¯å¥åº·æª¢æŸ¥: http://localhost:3001/health');\n  console.log('   - pgAdmin (é–‹ç™¼ç’°å¢ƒ): http://localhost:5050');\n}\n\n// åŸ·è¡Œæª¢æŸ¥\nif (require.main === module) {\n  checkSystemStatus();\n}\n\nmodule.exports = { checkSystemStatus };"