# 🛡️ 手動設定Windows防火牆教學

## 📋 **快速步驟**

### 方法1: 使用批次檔 (推薦)
1. 右鍵點擊 `setup-firewall-simple.bat`
2. 選擇「以系統管理員身分執行」
3. 看到成功訊息即可

### 方法2: 手動設定防火牆
如果批次檔無法執行，請按照以下步驟：

#### 步驟1: 開啟Windows防火牆設定
1. 按 `Win + R` 鍵
2. 輸入 `wf.msc` 按Enter
3. 或者：控制台 → 系統及安全性 → Windows Defender 防火牆 → 進階設定

#### 步驟2: 新增輸入規則
1. 點擊左側「輸入規則」
2. 點擊右側「新增規則...」

#### 步驟3: 設定規則類型
1. 選擇「連接埠」
2. 點擊「下一步」

#### 步驟4: 設定通訊協定
1. 選擇「TCP」
2. 選擇「特定本機連接埠」
3. 輸入：`3000, 3004`
4. 點擊「下一步」

#### 步驟5: 設定動作
1. 選擇「允許連線」
2. 點擊「下一步」

#### 步驟6: 設定設定檔
1. 保持全部勾選（網域、私人、公用）
2. 點擊「下一步」

#### 步驟7: 命名規則
1. 名稱：`雲水基材管理系統`
2. 描述：`允許端口3000和3004的連接`
3. 點擊「完成」

## 🧪 **測試連接**

設定完成後，用手機瀏覽器訪問：
- **測試頁面**: `http://192.168.68.99:3000/mobile-test.html`
- **主應用**: `http://192.168.68.99:3000/`

## 🔍 **故障排除**

### 如果還是無法連接：

#### 1. 檢查Windows防火牆狀態
```cmd
netsh advfirewall show allprofiles
```

#### 2. 暫時關閉防火牆測試 (不建議長期使用)
1. 控制台 → Windows Defender 防火牆
2. 點擊「開啟或關閉 Windows Defender 防火牆」
3. 暫時關閉私人網路防火牆
4. 測試手機是否能連接
5. **測試完記得重新開啟防火牆**

#### 3. 檢查路由器設定
- 有些路由器會阻擋內網設備間的通訊
- 查看路由器設定中的「AP隔離」或「客戶端隔離」
- 確保此功能是關閉的

#### 4. 檢查網路設定
- 確保手機和電腦連接同一個WiFi
- 確保不是訪客網路

## 📱 **最終測試**

1. 手機瀏覽器輸入：`http://192.168.68.99:3000/mobile-test.html`
2. 點擊「測試後端連接」
3. 點擊「測試登入功能」
4. 如果都成功，點擊「開啟主應用」

---
**如果以上方法都無效，可能是路由器或網路環境的限制**