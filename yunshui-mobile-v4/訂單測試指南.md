# 雲水基材管理系統手機版 - 訂單測試指南

## ✅ 後端修復完成

### 修復內容
- ✅ 添加了訂單的 `type` 字段 (AUXILIARY/FINISHED)
- ✅ 添加了訂單的 `items` 字段 (包含材料詳情)
- ✅ 後端API測試通過，返回3個測試訂單

### 測試訂單數據
| 訂單ID | 類型 | 狀態 | 項目數 | 說明 |
|--------|------|------|--------|------|
| order-1 | AUXILIARY | PENDING | 2 | 輔材訂單 (螺絲釘+電線) |
| order-2 | FINISHED | APPROVED | 1 | 完成材訂單 (木板) |
| id-1002 | AUXILIARY | PENDING | 2 | 輔材訂單 (螺絲釘+電線) |

## 📱 手機應用測試步驟

### 1. 確保後端運行
```bash
cd backend
node simple-server.js
```
應該看到：
```
📦 Materials API: http://localhost:3004/api/materials
🛒 Orders API: http://localhost:3004/api/orders
✅ 簡化服務器啟動成功！使用內存數據庫
```

### 2. 啟動手機應用
```bash
cd yunshui-mobile-v4
quick-fix-and-start.bat
```

### 3. 測試不同角色的訂單顯示

#### PM (Jeffrey) - 應該看到輔材訂單
- 快速登入: Jeffrey (pm123)
- 點擊「🔧 輔材訂單管理」
- **預期結果**: 應該看到 2 個輔材訂單 (order-1, id-1002)

#### AM (Miya) - 應該看到完成材訂單  
- 快速登入: Miya (am123)
- 點擊「🏠 完成材訂單管理」
- **預期結果**: 應該看到 1 個完成材訂單 (order-2)

#### WAREHOUSE (Mark) - 應該看到所有訂單
- 快速登入: Mark (wh123)
- 點擊「📋 訂單狀態管理」
- **預期結果**: 應該看到 3 個訂單 (全部)

#### ADMIN (系統管理員) - 應該看到所有功能
- 快速登入: 系統管理員 (admin123)
- **預期結果**: 可以訪問所有功能，看到所有訂單

## 🔍 故障排除

### 如果仍然看不到訂單
1. **檢查控制台日誌**: 在Expo Go中搖動手機，查看日誌
2. **檢查網路連接**: 確保手機和電腦在同一WiFi
3. **重新登入**: 登出後重新登入
4. **重啟應用**: 關閉Expo Go重新掃描QR碼

### 調試步驟
1. 登入後檢查儀表板的「總訂單數」是否顯示正確數字
2. 如果數字是0，說明API連接有問題
3. 如果數字正確但列表為空，說明過濾邏輯有問題

## 🎯 成功指標

- ✅ Jeffrey 可以看到 2 個輔材訂單
- ✅ Miya 可以看到 1 個完成材訂單  
- ✅ Mark 可以看到 3 個訂單
- ✅ 系統管理員可以訪問所有功能
- ✅ 可以創建新訂單並立即看到更新

---

**修復時間**: 2024年10月29日  
**狀態**: 後端數據已修復，準備測試