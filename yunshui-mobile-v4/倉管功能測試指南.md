# 手機版倉管功能測試指南

## 🎯 新增功能概覽

### 已實現的倉管功能
- ✅ 增強版訂單狀態管理頁面
- ✅ 訂單狀態更新功能
- ✅ 狀態徽章顯示
- ✅ 訂單詳細信息展示
- ✅ 實時狀態更新API

### 功能特點
1. **狀態徽章**: 不同顏色顯示訂單狀態
2. **狀態操作**: 根據當前狀態顯示可用操作
3. **詳細信息**: 顯示訂單類型、金額、項目清單
4. **實時更新**: 狀態更新後立即刷新數據

## 📱 測試步驟

### 1. 登入倉管帳號
- 使用 **Mark (WAREHOUSE)** 快速登入
- 密碼: `wh123`
- 角色: 倉管人員

### 2. 進入訂單狀態管理
- 點擊「📋 訂單狀態管理」功能卡片
- 應該看到所有訂單的詳細信息

### 3. 測試狀態更新功能

#### 測試流程 1: 確認待處理訂單
1. 找到狀態為「待處理」的訂單
2. 點擊「✅ 確認訂單」按鈕
3. 確認狀態更新為「已確認」
4. 檢查狀態徽章顏色變化

#### 測試流程 2: 開始處理訂單
1. 找到狀態為「已確認」的訂單
2. 點擊「🔄 開始處理」按鈕
3. 確認狀態更新為「處理中」
4. 檢查可用操作按鈕變化

#### 測試流程 3: 完成訂單
1. 找到狀態為「處理中」的訂單
2. 點擊「✅ 完成訂單」按鈕
3. 確認狀態更新為「已完成」
4. 檢查狀態徽章變為綠色

#### 測試流程 4: 取消訂單
1. 找到狀態為「待處理」或「已確認」的訂單
2. 點擊「❌ 取消訂單」按鈕
3. 確認狀態更新為「已取消」
4. 檢查狀態徽章變為紅色

### 4. 測試刷新功能
- 點擊右上角「🔄 刷新」按鈕
- 確認數據重新載入
- 檢查狀態更新是否保持

## 🎨 UI 設計特點

### 狀態徽章顏色
- 🟡 **待處理** (PENDING): 黃色 `#ffc107`
- 🔵 **已確認** (CONFIRMED): 藍綠色 `#17a2b8`
- 🔵 **處理中** (PROCESSING): 藍色 `#007bff`
- 🟢 **已完成** (COMPLETED): 綠色 `#28a745`
- 🔴 **已取消** (CANCELLED): 紅色 `#dc3545`

### 操作按鈕邏輯
```
PENDING → [確認訂單] [取消訂單]
CONFIRMED → [開始處理] [取消訂單]
PROCESSING → [完成訂單]
COMPLETED → (無操作)
CANCELLED → (無操作)
```

### 訂單信息顯示
- 訂單編號和狀態徽章
- 訂單類型 (🔧 輔材 / 🏠 完成材)
- 創建日期
- 訂單金額
- 項目清單 (最多顯示2個，超過則顯示省略)

## 🔧 技術實現

### API 端點
- **更新狀態**: `PUT /api/orders/{orderId}/status`
- **獲取訂單**: `GET /api/orders`

### 狀態流程
```
PENDING → CONFIRMED → PROCESSING → COMPLETED
    ↓         ↓
CANCELLED  CANCELLED
```

## 🎯 預期結果

### 成功指標
- ✅ Mark登入後可以看到「📋 訂單狀態管理」功能
- ✅ 訂單列表顯示詳細信息和狀態徽章
- ✅ 狀態更新按鈕根據當前狀態動態顯示
- ✅ 點擊狀態按鈕後成功更新狀態
- ✅ 狀態更新後徽章顏色和可用操作正確變化
- ✅ 刷新功能正常工作

### 與PC版對比
- **PC版**: 複雜的狀態管理界面，包含多種狀態類型
- **手機版**: 簡化的訂單狀態管理，專注於核心流程
- **共同點**: 使用相同的後端API，數據完全同步

## 🆘 故障排除

### 如果狀態更新失敗
1. 檢查網路連接
2. 確認後端API正常運行
3. 檢查用戶權限 (只有WAREHOUSE和ADMIN可以更新狀態)
4. 查看手機調試日誌

### 如果看不到訂單
1. 確認後端有訂單數據
2. 檢查API連接 (192.168.68.103:3000)
3. 嘗試刷新功能
4. 重新登入

---

**實現時間**: 2024年10月30日  
**狀態**: 倉管功能已完成，準備測試