<!DOCTYPE html>
<html>
<head>
    <title>簡單診斷</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; }
        .result { margin: 10px 0; padding: 10px; border: 1px solid #ccc; }
        .success { background: #d4edda; }
        .error { background: #f8d7da; }
    </style>
</head>
<body>
    <h1>Render 服務診斷</h1>
    <div id="results"></div>
    
    <script>
        const baseUrl = 'https://yunshui-material-management.onrender.com';
        const resultsDiv = document.getElementById('results');
        
        function addResult(message, isSuccess = false) {
            const div = document.createElement('div');
            div.className = `result ${isSuccess ? 'success' : 'error'}`;
            div.textContent = message;
            resultsDiv.appendChild(div);
        }
        
        // 測試 1: 基本連接
        fetch(`${baseUrl}/health`)
            .then(response => response.json())
            .then(data => {
                addResult(`✅ 健康檢查成功 - 版本: ${data.version}`, true);
                
                // 測試 2: 靜態文件目錄
                return fetch(`${baseUrl}/uploads/`);
            })
            .then(response => {
                addResult(`✅ /uploads/ 訪問成功 - 狀態: ${response.status}`, true);
                
                // 測試 3: materials 目錄
                return fetch(`${baseUrl}/uploads/materials/`);
            })
            .then(response => {
                addResult(`✅ /uploads/materials/ 訪問成功 - 狀態: ${response.status}`, true);
            })
            .catch(error => {
                addResult(`❌ 連接失敗: ${error.message}`);
                
                // 如果基本連接失敗，嘗試其他可能的 URL
                const altUrls = [
                    'https://yunshui-backend-v2.onrender.com',
                    'https://yunshui-backend1.onrender.com'
                ];
                
                altUrls.forEach(url => {
                    fetch(`${url}/health`)
                        .then(response => response.json())
                        .then(data => {
                            addResult(`✅ 替代 URL 成功: ${url} - 版本: ${data.version}`, true);
                        })
                        .catch(err => {
                            addResult(`❌ 替代 URL 失敗: ${url} - ${err.message}`);
                        });
                });
            });
    </script>
</body>
</html>