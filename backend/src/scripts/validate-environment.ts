#!/usr/bin/env ts-node\n\nimport { getEnvironmentConfig, getConfigSummary } from '../config/environment';\nimport { checkDatabaseHealth } from '../config/database';\n\n/**\n * ç’°å¢ƒé…ç½®é©—è­‰è…³æœ¬\n */\nasync function validateEnvironment(): Promise<void> {\n  console.log('ğŸ” Validating environment configuration...');\n  \n  try {\n    // è¼‰å…¥é…ç½®\n    const config = getEnvironmentConfig();\n    console.log('âœ… Environment configuration loaded successfully');\n    \n    // é¡¯ç¤ºé…ç½®æ‘˜è¦\n    console.log('\\nğŸ“‹ Configuration Summary:');\n    console.table(getConfigSummary());\n    \n    // é©—è­‰è³‡æ–™åº«é€£ç·š\n    console.log('\\nğŸ—„ï¸  Testing database connection...');\n    const dbHealthy = await checkDatabaseHealth();\n    if (dbHealthy) {\n      console.log('âœ… Database connection successful');\n    } else {\n      console.log('âŒ Database connection failed');\n      process.exit(1);\n    }\n    \n    // é©—è­‰å¿…è¦ç›®éŒ„\n    console.log('\\nğŸ“ Checking required directories...');\n    const fs = await import('fs/promises');\n    const path = await import('path');\n    \n    const requiredDirs = [\n      config.UPLOAD_PATH,\n      config.LOG_FILE_PATH\n    ];\n    \n    for (const dir of requiredDirs) {\n      try {\n        await fs.access(dir);\n        console.log(`âœ… Directory exists: ${dir}`);\n      } catch {\n        console.log(`ğŸ“ Creating directory: ${dir}`);\n        await fs.mkdir(dir, { recursive: true });\n        console.log(`âœ… Directory created: ${dir}`);\n      }\n    }\n    \n    // é©—è­‰æª”æ¡ˆæ¬Šé™\n    console.log('\\nğŸ” Checking file permissions...');\n    try {\n      const testFile = path.join(config.UPLOAD_PATH, 'test.txt');\n      await fs.writeFile(testFile, 'test');\n      await fs.unlink(testFile);\n      console.log('âœ… Upload directory is writable');\n    } catch (error) {\n      console.log('âŒ Upload directory is not writable:', error);\n      process.exit(1);\n    }\n    \n    // é©—è­‰ç’°å¢ƒç‰¹å®šè¨­å®š\n    console.log('\\nâš™ï¸  Validating environment-specific settings...');\n    \n    if (config.NODE_ENV === 'production') {\n      // ç”Ÿç”¢ç’°å¢ƒæª¢æŸ¥\n      if (config.JWT_SECRET.length < 32) {\n        console.log('âŒ JWT_SECRET is too short for production');\n        process.exit(1);\n      }\n      \n      if (config.BCRYPT_ROUNDS < 12) {\n        console.log('âš ï¸  BCRYPT_ROUNDS is low for production (recommended: 12+)');\n      }\n      \n      if (!config.DB_SSL) {\n        console.log('âš ï¸  Database SSL is disabled in production');\n      }\n      \n      console.log('âœ… Production environment validation passed');\n    } else if (config.NODE_ENV === 'development') {\n      // é–‹ç™¼ç’°å¢ƒæª¢æŸ¥\n      if (config.LOG_LEVEL !== 'debug') {\n        console.log('âš ï¸  LOG_LEVEL is not set to debug in development');\n      }\n      \n      console.log('âœ… Development environment validation passed');\n    } else if (config.NODE_ENV === 'test') {\n      // æ¸¬è©¦ç’°å¢ƒæª¢æŸ¥\n      if (config.BCRYPT_ROUNDS > 4) {\n        console.log('âš ï¸  BCRYPT_ROUNDS is high for testing (recommended: 4)');\n      }\n      \n      console.log('âœ… Test environment validation passed');\n    }\n    \n    console.log('\\nğŸ‰ Environment validation completed successfully!');\n    \n  } catch (error) {\n    console.error('âŒ Environment validation failed:', error);\n    process.exit(1);\n  }\n}\n\n// åŸ·è¡Œé©—è­‰\nif (require.main === module) {\n  validateEnvironment().catch(error => {\n    console.error('Fatal error:', error);\n    process.exit(1);\n  });\n}\n\nexport { validateEnvironment };"